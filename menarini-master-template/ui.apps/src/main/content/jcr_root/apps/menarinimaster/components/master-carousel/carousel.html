<template data-sly-template.carousel="${@ slidesPerRow}">
	<div data-sly-use.carousel="com.adobe.cq.wcm.core.components.models.Carousel"
	     data-sly-use.templates="core/wcm/components/commons/v1/templates.html"
	     data-panelcontainer="${wcmmode.edit && 'carousel'}"
	     id="${carousel.id}"
	     class="cmp-men-carousel"
	     role="group"
	     aria-roledescription="carousel"
	     data-cmp-is="carousel"
	     data-placeholder-text="${wcmmode.edit && 'Please add Carousel components here' @ i18n}">

		<div data-sly-set.items="${carousel.children || carousel.items}"
		     data-sly-test="${items && items.size > 0}"
		     class="swiper-container"
		     aria-atomic="false"
		     aria-live="${carousel.autoplay ? 'off' : 'polite'}">
			<div class="swiper">
				<div class="swiper-wrapper">
					<div data-sly-repeat.item="${items}"
					     data-sly-resource="${item.resource @ decorationTagName='div'}"
					     id="${item.id}-tabpanel"
					     class="swiper-slide cmp-carousel__item${item.name == carousel.activeItem ? ' cmp-carousel__item--active' : ''}"
					     role="tabpanel"
					     aria-labelledby="${item.id}-tab"
					     aria-roledescription="slide"
					     aria-label="${(carousel.accessibilityAutoItemTitles && item.title) || 'Slide {0} of {1}' @ format=[itemList.count, carousel.items.size], i18n}"
					     data-cmp-data-layer="${item.data.json}"
					     data-cmp-hook-carousel="item"></div>
				</div>
			</div>
			<div class="swiper-button-next"></div>
			<div class="swiper-button-prev"></div>
			<ol class="cmp-carousel__indicators swiper-pagination"
			    role="tablist"
			    aria-label="${carousel.accessibilityTablist || 'Choose a slide to display' @ i18n}"
			    data-cmp-hook-carousel="indicators">
				<li data-sly-repeat.item="${items}"
				    id="${item.id}-tab"
				    class="cmp-carousel__indicator${item.name == carousel.activeItem ? ' cmp-carousel__indicator--active' : ''}"
				    role="tab"
				    aria-controls="${item.id}-tabpanel"
				    aria-label="${'Slide {0}' @ format=[itemList.count], i18n}"
				    data-cmp-hook-carousel="indicator">${item.title}</li>
			</ol>

			<input type="hidden" class="slides-number" value="${slidesPerRow ? slidesPerRow : '3'}">
			<input type="hidden" class="slide-mode" value="carousel">


		</div>
	</div>

	<sly data-sly-resource="${resource.path @ resourceType='wcm/foundation/components/parsys/newpar', appendPath='/*', decorationTagName='div', cssClassName='new section aem-Grid-newComponent'}"
	     data-sly-test="${(wcmmode.edit || wcmmode.preview) && items.size < 1}"></sly>
	</div>
</template>